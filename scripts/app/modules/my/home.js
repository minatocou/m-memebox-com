define("/modules/my/home",["require","exports","module","/modules/vue/vue","/modules/vue/vue-common"],function(e){{var t=e("/modules/vue/vue"),o=e("/modules/vue/vue-common");new t({mixins:[o],el:"html",data:{title:"个人中心",init:!1,orderInit:!1,initOuts:!1,pageIndex:null,orders:null,pageOrders:[],isEnd:!1,wishList:[],wishPageIndex:1,initPage:null,userData:{}},methods:{initHome:function(e){var t=this,o=location.hash||"#home";"#homel"==o&&e("#home-scroll").scroll().refresh(),t.initPage={"#order":t.goOrder,"#collection":t.getWishList},t.initPage[o]&&t.initPage[o](),t.initView(o)},goOrder:function(e,t){var o=this,i=null;i=e>=0||t>=0?t||0==t?o.pageOrders[e][t].realOrderId:o.orders[e].realOrderId:o.getSearch("orderId"),location.href="/m/payment/my_order.html?orderId="+i},logout:function(){var e=this;e.httpAjax({url:"/h5/customer/logout",success:function(t){1==t.code&&(localStorage.clear(),e.go("../home/home.html")),e.popup({content:t.msg})}})},getUserInfo:function(){var e=this;e.httpAjax({url:"/h5/newaccount/index",success:function(t){e.userData=t.data,e.userData.level--,e.userData.vipImg=e.userData.vipImg="/images/app/my/include/vip"+e.userData.level.toString()+".png",localStorage.userData=JSON.stringify(e.userData),e.init=!0,e.$refs.loading.show=!1},complete:function(e){0==e.code&&(localStorage.removeItem("mmToken"),location.reload())}})},getWishList:function(e){var t=this;e?null:t.wishList=[],t.httpAjax({url:"/h5/account/wishlist",param:{pageIndex:t.wishPageIndex},success:function(e){function o(){setTimeout(function(){mui("#wish-list").pullRefresh().endPullupToRefresh(!1),6*t.wishList.length>=e.total?(t.popup({content:"没有更多商品了",time:1e3,autoClose:!0}),mui("#wish-list").pullRefresh().endPullupToRefresh(!0)):(t.wishPageIndex++,t.getWishList(!0))},0)}t.wishList.push(e.data),mui("#wish-list").pullRefresh({up:{contentrefresh:"正在加载...",contentnomore:"没有更多数据了",indicators:!1,callback:o}}),setTimeout(t.initEcho,50)}})},goMyInfo:function(){location.href="myInfo.html"},fanliMask:function(){var e=this;e.popup({title:'<p style="margin-bottom: 20px;color:#333">下载APP，蜜豆赚不停！</p>',content:'<p style="margin-bottom: 0;font-size:12px;text-align: left;color:#333;line-height: 20px;">注:仅在Memebox网站和APP内下单才可返蜜豆，更多会员权限请登陆Memebox查看。</p>',type:"confirm",btn:['<span style="color:#ccc">关闭</span>',"去下载"],titleClass:"mini",ok:function(){location.href="http://pkg-cn1001.memebox.com/android/other/automm.html#flw"}})}},ready:function(){},created:function(){var e=this;localStorage.mmToken?(mui.init(),e.initHome(mui),e.getUserInfo()):(localStorage.removeItem("ref"),location.href="../account/login.html")},watch:{}})}});