define("/modules/app/sign/sign",["require","exports","module","/modules/vue/vue","/modules/vue/vue-common","/modules/app/app"],function(t){var e=t("/modules/vue/vue"),a=t("/modules/vue/vue-common"),s=t("/modules/app/app");+new Date>+new Date("2017/5/1")?location.href="/m/app/new-sign/sign.html":vue=new e({mixins:[a,s],data:{init:"",date:{},mask:!0,signData:{},style:{width:""},succeed:""},el:"html",methods:{maskFoo:function(){this.mask=!this.mask,console.log(this.mask)},userInfoCall:function(t){var e=this;if(console.log(t),t&&t.data&&t.data.token)this.errorMsg=t.data.token,localStorage.mmToken=t.data.token;else try{this.errorMsg=JSON.stringify(t)}catch(a){alert(a)}localStorage.mmToken?e.sign():e.app_login()},calendar:function(){var t=this,e=new Date,a={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()},s={init:function(t,e){this.year=t,this.month=e},getYear:function(){return this.year%400==0||this.year%4==0&&this.year%100!=0},getMonth:function(){if(2==this.month)this.day=this.getYear()?29:28;else{for(var t=[1,3,5,7,8,10,12],e=0;7>e;e++)if(t[e]==this.month)return this.day=31;this.day=30}},getLastMonth:function(){if(this.lastMonth=0==this.month?12:this.month-1,2==this.lastMonth)this.lastMonth=this.getYear()?29:28;else{for(var t=[1,3,5,7,8,10,12],e=0;7>e;e++)if(t[e]==this.lastMonth)return this.lastMonth=31;this.lastMonth=30}},getDay:function(){var e=this.year,s=this.month,i=this.day,n=new Date(e+"/"+s+"/1").getDay();this.day=[],this.getLastMonth();for(var o=0;n>o;o++)this.day.unshift([this.lastMonth,"other"]),this.lastMonth--;if(0!=t.signData.record.length){var h={};t.signData.record.forEach(function(t){h[t]=t});for(var o=1;42-n+1>o;o++)this.day.push(o>i?[o-i,"other"]:[o,o==a.day?"today":h[o]&&"sign-day"])}},showDate:function(){return this.getYear(),this.getMonth(),this.getDay(),{year:this.year,month:this.month,day:this.day}}};s.init(a.year,a.month),this.date=s.showDate(),this.test=JSON.stringify(this.date)},sign:function(){var t=this;t.httpAjax({url:"/mobilev37/signin/sign_and_view",param:{sign:"9a712390ebe3fbf80fc94413378f250c"},success:function(e){t.signData=e.data[0],t.succeed=e.data.succeed,t.signData.record=JSON.parse(t.signData.record),t.style.width=t.signData.record.length>10?"100%":t.signData.record.length/10*100+"%",t.calendar(),t.init=!0}})}},ready:function(){},created:function(){var t=this;t.isApp()?(localStorage.removeItem("mmToken"),t.app_userinfo(),setTimeout(function(){localStorage.mmToken?t.sign():t.app_login()},500)):t.sign()}})});