define("/modules/payment/fail",["require","exports","module","/modules/vue/vue","/modules/vue/vue-common","/modules/payment/ga"],function(a){{var e=a("/modules/vue/vue"),t=a("/modules/vue/vue-common"),r=a("/modules/payment/ga");new e({mixins:[t,r],el:"html",data:{init:!1,pay:{time:"",ali:!0,totalAmount:"",wx:"",type:1},codeToLabel:{1:"待支付",2:"待发货",3:"待收货",4:"已取消",5:"已完成",6:"待付尾款",7:"关闭"},showFail:!0},methods:{checkout:function(){var a=this;a.showFail=!1,a.pay.ali?(a.pay.globalUrl=a.pay.globalUrl||"/h5/payment/globalAlipayPayment?orderId="+a.pay.orderId+"&orderIds="+a.pay.orderIds||"",a.pay.global?this.httpAjax({url:a.pay.globalUrl,param:a.pay.param,success:function(e){a.pay.globalOk?a.pay.globalOk(e):location.href=e.data.url}}):(a.pay.aliUrl=a.pay.aliUrl||"/h5/payment/alipayPayment?orderId="+a.pay.orderId+"&orderIds="+a.pay.orderIds||"",this.httpAjax({url:a.pay.aliUrl,success:function(e){a.pay.aliOk?a.pay.aliOk(e):location.href=e.data.url}}))):a.wxPay({orderId:a.pay.orderId,wxOk:function(e){a.pay.wxOk&&a.pay.wxOk(e)}})},initOrder:function(){var a=this;a.httpAjax({url:"/h5/order/detail",param:{orderId:a.getSearch("orderId")},success:function(e){a.codeToLabel[e.data.statusCode]&&(e.data.statusLabel=a.codeToLabel[e.data.statusCode]);var t=e.data;a.pay.orderId=t.realOrderId,a.pay.totalAmount=t.duePaid,a.$refs.loading.show=!1,t.closedLeftTime>0?a.initTime(t.closedLeftTime):a.pay.time=!1,1==t.orderProductInfo[0].isLocalProduct&&(a.pay.type=2),a.isWeixin()&&a.wxPay(),a.isWeixin()&&2==a.pay.type?(a.pay.wx=!0,a.pay.ali=!1,a.pay.wxOk=function(){location.href="/m/payment/payment.html?orderIds="+a.getOrderIds("orderIds")+"&orderId="+a.pay.orderId}):(a.pay.wx=!1,a.pay.ali=!0),a.pay.global="1"==a.pay.type?!0:!1,a.init=!0}})},initTime:function(a){function e(a){var e=setInterval(function(){a>=0?(t(a),a--):(o.pay.time=!1,clearInterval(e))},1e3)}function t(a){var e=parseInt(a/60/60/24,10),t=parseInt(a/60/60%24,10),i=parseInt(a/60%60,10),d=parseInt(a%60,10);o.pay.time=a>=86400?r(e)+"天"+r(t)+"时"+r(i)+"分"+r(d)+"秒":86400>a&&a>=3600?r(t)+"时"+r(i)+"分"+r(d)+"秒":3600>a&&a>=60?r(i)+"分"+r(d)+"秒":r(d)+"秒"}function r(a){return 10>a?"0"+a:a}var o=this;e(a)},goBack:function(){var a=this;this.popup({type:"confirm",title:" ",content:"真的要停止付款吗？",btn:["去意已决","我再看看"],n:function(){location.href=a.page+"/payment/my_orders.html"}})}},ready:function(){var a=this;a.getSearch("orderId")&&a.initOrder()},created:function(){}})}});