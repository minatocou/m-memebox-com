define("/modules/productClassify/productClassify",["require","exports","module","/modules/vue/vue","/modules/vue/vue-validator","/modules/vue/vue-common"],function(e){var t=e("/modules/vue/vue");t.use(e("/modules/vue/vue-validator"));{var o=e("/modules/vue/vue-common");new t({mixins:[o],el:"html",data:{title:"",init:!1,price:null,position:!0,dataProductList:{},productList:{},showList:!0,categoryId:"",cartNumber:"",pageIndex:1,orderTotal:""},methods:{initMui:function(){function e(){setTimeout(function(){mui("#pullrefresh").pullRefresh().endPullupToRefresh(!1),10*t.pageIndex>=t.orderTotal?(t.popup({content:"没有更多商品了",time:1e3,autoClose:!0}),mui("#pullrefresh").pullRefresh().endPullupToRefresh(!0)):(t.pageIndex++,t.getList({},function(e){t.dataProductList.data=t.dataProductList.data.concat(e.data)}))},0)}var t=this;mui.init({pullRefresh:{container:"#pullrefresh",up:{contentrefresh:"正在加载...",callback:e}}})},positionSort:function(){var e=this;e.position=!0,e.price=null,e.pageIndex=1,mui("#pullrefresh").pullRefresh().scrollTo(0,0,100),mui("#pullrefresh").pullRefresh().refresh(!0),e.getList({})},priceSort:function(){var e=this,t={};e.pageIndex=1,e.price="asc"==e.price?"desc":"asc",e.position=!1,mui("#pullrefresh").pullRefresh().scrollTo(0,0,100),mui("#pullrefresh").pullRefresh().refresh(!0),e.getList(t)},getCart:function(){var e=this;e.httpAjax({url:"/h5/newcart/count",showLoading:!0,success:function(t){e.cartNumber=t.data.totalQty}})},getList:function(e,t){var o=this;e=e||{},e.pageIndex=o.pageIndex,e.categoryId=o.categoryId,e.order=1,o.price&&(e.order="asc"==o.price?"3":"4"),o.httpAjax({url:"/global/search",domain:o.searchDomain,param:e,success:function(e){o.orderTotal=e.orderTotal,t?t(e):o.dataProductList=e,o.init=!0,o.$nextTick(function(){o.initMui()}),setTimeout(function(){o.initEcho()},10)}})}},ready:function(){},created:function(){var e=this;e.categoryId=location.hash.slice(1),e.getList({},function(t){"0"==t.total?e.popup({content:"已被抢空",time:1e3,autoClose:!0,ok:function(){window.location.href="../home/home.html"}}):(e.dataProductList=t,e.setTitle(e.dataProductList.categoryName),e.title=e.dataProductList.categoryName)})}})}});