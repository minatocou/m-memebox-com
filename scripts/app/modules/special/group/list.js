define("/modules/special/group/list",["require","exports","module","/modules/vue/vue","/modules/vue/vue-common","/modules/app/app"],function(e){var t=e("/modules/vue/vue"),o=e("/modules/vue/vue-common"),i=e("/modules/app/app");vue=new t({mixins:[o,i],el:"html",data:{title:"拼团",init:!1,list:null,dataProductList:[],pageIndex:1},methods:{initMui:function(){var e=this;mui.init({pullRefresh:{container:"#pullrefresh",down:{callback:function(){e.getList({refresh:!0})}},up:{callback:function(){e.getList({more:!0,self:this})}}}})},userInfoCall:function(e){if(e&&e.data&&e.data.token)this.errorMsg=e.data.token,localStorage.mmToken=e.data.token,this.getList();else{this.getList();try{this.errorMsg=JSON.stringify(e)}catch(t){alert(t)}}},isEndAt:function(e){return e=e.replace(/-/g,"/"),new Date(e).getTime()>(new Date).getTime()},goDetail:function(e){1==e.stockStatus&&(location.href="details.html?productId="+e.productId)},getList:function(e){var t=this;e=e||{},t.httpAjax({url:"/h5/groupon/list",param:{s:t.getSearch("s")||"",pageIndex:t.pageIndex},success:function(o){1==o.code&&(t.$refs.loading.show=!1,e.more?(t.dataProductList.push(o.data),t.pageIndex++,o.data&&o.data.length>0?e.self.endPullupToRefresh():e.self.endPullupToRefresh(!0)):e.refresh?mui("#pullrefresh").pullRefresh().endPulldownToRefresh():(t.dataProductList.push(o.data),t.init=!0,setTimeout(function(){t.initMui()},100),t.pageIndex++))}})},logout:function(e){var t=this;t.httpAjax({url:"/h5/customer/logout",showLoading:!0,success:function(t){1==t.code&&(localStorage.removeItem("user"),localStorage.removeItem("mmToken"),console.log("logout"),e&&e(t))}})}},ready:function(){},created:function(){var e=this;try{e.isApp()&&(e.iosVer()>=360||e.androidVer()>=360)?e.logout(function(){e.app_userinfo(),setTimeout(function(){localStorage.mmToken||e.getList()},500)}):e.getList()}catch(t){alert(t),e.getList()}}})});