define("/modules/special/teletext/teletext",["require","exports","module","/modules/vue/vue","/modules/vue/vue-common","/modules/app/app"],function(t){{var e=t("/modules/vue/vue"),a=t("/modules/vue/vue-common"),i=t("/modules/app/app");new e({mixins:[a,i],el:"html",data:{title:"",init:!1,teletextData:{id:"",title:"",intro:"",author:"",createDate:"",tags:[],content:"",views:0,zan:0},skus:[],prdlist:[]},methods:{getTeleId:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return null!=a?a[2]:null},initTeletext:function(){var t=this,e=t.getTeleId("id");t.httpAjax({url:"/h5/Imagetext/detail",param:{id:e},goLogin:!1,success:function(e){if(1==e.code){var a=e.data;if(t.teletextData={id:"",title:"",intro:"",author:"",createDate:"",tags:[],content:"",views:0,zan:0},t.teletextData.id=a.id,t.teletextData.cover=a.cover,t.teletextData.author=a.author,t.teletextData.title=a.title,t.teletextData.intro=a.intro,t.teletextData.views=a.view_count,t.teletextData.zan=a.zan_count,a.created_at&&(t.teletextData.createDate=a.created_at.substr(0,10)),a.tags_name){for(var i=a.tags_name.split(","),o=[],n=0;n<i.length;n++)i[n]&&o.push(i[n]);t.teletextData.tags=o}if(a.skus&&(t.skus=a.skus.split(",")),a.productList&&(t.prdlist=a.productList),a.content){var r,l=($(a.content),a.content),s=document.createElement("div");s.innerHTML=l,r=s.getElementsByTagName("*"),t.teletextData.content=r}t.setShare(),document.title=a.title.length>15?a.title.substr(0,15)+"...":a.title,t.init=!0}else t.popup({content:e.msg})},error:function(){t.popup({content:"程序出错了"})}})},getProductDetailUrl:function(t){var e=this,a="";return e.isAppPresale()?(e.app_product({productId:t}),void(a=e.domain+"/catalog/product/view/id/"+t)):a="/m/productDetails/productDetails.html#"+t},gotoDetail:function(t){var e=this,a="",i=t,o=e.teletextData.id,n=e.teletextData.title;e.isAppPresale()?(e.app_product({productId:t}),a=e.domain+"/catalog/product/view/id/"+t):(a="/m/productDetails/productDetails.html#"+t,location.href=a),_maq.push(["_trackEvent","artc_det_pro_ck",{product_id:i,image_text_id:o,title:n}])},getShareData:function(){var t,e,a,i,o=this;return t=o.teletextData.id,e=o.teletextData.title,a=o.teletextData.intro,i=o.teletextData.cover,{title:e,text:a,url:location.origin+"/m/special/teletext/index.html?id="+t,image:i}},appShare:function(){var t=this;t.isApp()?(t.app_share(t.getShareData()),_hmt.push(["_trackEvent","图文页面","分享"])):t.popup({title:"",type:"confirm",content:"悄悄告诉你，这个活动太划算，只能在APP内进行哦",btn:["关闭","下载APP"],ok:t.goApp()})},setShare:function(){var t=this;t.isApp()?t.app_setShare(t.getShareData()):t.set_share(t.getShareData())}},ready:function(){},created:function(){var t=this;t.initTeletext()}})}});