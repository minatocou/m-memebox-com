"use strict";function Particles(t){var a=this,e=t.ease||"easeInOutExpo";"function"!=typeof window[e]&&(console.log("the function is not existed, it will use easeInOutExpo instead"),e="easeInOutExpo"),this.init=function(){if(!t.canvasId||!document.getElementById(t.canvasId))return void console.log("pls use the correct canvas id");if(!t.imgUrl)return void console.log("pls use the correct img url");if(canvas.self=document.getElementById(t.canvasId),canvas.self.getContext){canvas.w=canvas.self.width,canvas.h=canvas.self.height,canvas.ctx=canvas.self.getContext("2d");var a=new Image;image.isLoaded=!1,a.onload=function(){image.self=a,image.w=a.width,image.h=a.height,image.x=t.imgX||parseInt(canvas.w/2-image.w/2),image.y=t.imgY||0,canvas.ctx.drawImage(image.self,image.x,image.y,image.w,image.h),image.imgData=canvas.ctx.getImageData(image.x,image.y,image.w,image.h),canvas.ctx.clearRect(0,0,canvas.w,canvas.h),Particles.prototype._calculate({color:t.fillStyle||"rgba(26,145,211,1)",pOffset:t.particleOffset||2,startX:t.startX||image.x+image.w/2,startY:t.startY||0,duration:t.duration||3e3,interval:t.interval||3,ease:e,ratioX:t.ratioX||1,ratioY:t.ratioY||1,cols:t.cols||100,rows:t.rows||100}),image.isLoaded=!0,startTime=(new Date).getTime()},a.crossOrigin="anonymous",a.src=t.imgUrl}}(),this.draw=function(){image.isLoaded?Particles.prototype._draw():setTimeout(a.draw)},this.animate=function(){image.isLoaded?Particles.prototype._animate(t.delay):setTimeout(a.animate)}}var canvas={},image={},requestId=0,startTime=0;Particles.prototype={array:[],_calculate:function(t){for(var a=(image.imgData.length,image.imgData.data),e=t.cols,n=t.rows,r=parseInt(image.w/e),i=parseInt(image.h/n),s=0,o=0;e>o;o++)for(var u=0;n>u;u++)s=4*(u*i*image.w+o*r),a[s]<=10&&this.array.push({x0:t.startX,y0:t.startY,x1:image.x+o*r+10*(Math.random()-.5)*t.pOffset,y1:image.y+u*i+10*(Math.random()-.5)*t.pOffset,fillStyle:t.color,delay:u/20,currTime:0,count:0,duration:parseInt(t.duration/16.66)+1,interval:parseInt(10*Math.random()*t.interval),ease:t.ease,ratioX:t.ratioX,ratioY:t.ratioY})},_draw:function(){canvas.ctx.clearRect(0,0,canvas.w,canvas.h);for(var t=this.array.length,a=null,e=0;t>e;e++)a=this.array[e],canvas.ctx.fillStyle=a.fillStyle,canvas.ctx.fillRect(a.x1,a.y1,1,1)},_render:function(){canvas.ctx.clearRect(0,0,canvas.w,canvas.h);for(var t,a,e=Particles.prototype.array,n=e.length,r=null,i=0,s=0,o=0,u=1,c=1,l=0;n>l;l++)if(r=e[l],r.count++>r.delay){if(canvas.ctx.fillStyle=r.fillStyle,i=r.currTime,s=r.duration,o=r.interval,1!==r.ratioX?u=r.ratioX+2*Math.random():1,1!==r.ratioY?c=r.ratioY+2*Math.random():1,e[n-1].duration+e[n-1].interval<e[n-1].currTime/2)return cancelAnimationFrame(requestId),void Particles.prototype._draw();s+o>i?i>=o&&(t=window[r.ease]((i-o)*u,r.x0,(r.x1-r.x0)*u,s),a=window[r.ease]((i-o)*c,r.y0,(r.y1-r.y0)*c,s),canvas.ctx.fillRect(t,a,1,1)):canvas.ctx.fillRect(r.x1,r.y1,1,1),r.currTime+=Math.random()+.5}requestId=requestAnimationFrame(Particles.prototype._render)},_animate:function(t){startTime+t<(new Date).getTime()?requestId=requestAnimationFrame(Particles.prototype._render):setTimeout(function(){Particles.prototype._animate(t)})}};var linear=function(t,a,e,n){return e*t/n+a},easeInOutQuad=function(t,a,e,n){return t/=n/2,1>t?e/2*t*t+a:(t--,-e/2*(t*(t-2)-1)+a)},easeOutQuad=function(t,a,e,n){return t/=n,-e*t*(t-2)+a},easeOutQuad=function(t,a,e,n){return t/=n,-e*t*(t-2)+a},easeInCubic=function(t,a,e,n){return t/=n,e*t*t*t+a},easeOutCubic=function(t,a,e,n){return t/=n,t--,e*(t*t*t+1)+a},easeInOutCubic=function(t,a,e,n){return t/=n/2,1>t?e/2*t*t*t+a:(t-=2,e/2*(t*t*t+2)+a)},easeInQuart=function(t,a,e,n){return t/=n,e*t*t*t*t+a},easeOutQuart=function(t,a,e,n){return t/=n,t--,-e*(t*t*t*t-1)+a},easeInOutQuart=function(t,a,e,n){return t/=n/2,1>t?e/2*t*t*t*t+a:(t-=2,-e/2*(t*t*t*t-2)+a)},easeInQuint=function(t,a,e,n){return t/=n,e*t*t*t*t*t+a},easeOutQuint=function(t,a,e,n){return t/=n,t--,e*(t*t*t*t*t+1)+a},easeInOutQuint=function(t,a,e,n){return t/=n/2,1>t?e/2*t*t*t*t*t+a:(t-=2,e/2*(t*t*t*t*t+2)+a)},easeInSine=function(t,a,e,n){return-e*Math.cos(t/n*(Math.PI/2))+e+a},easeOutSine=function(t,a,e,n){return e*Math.sin(t/n*(Math.PI/2))+a},easeInOutSine=function(t,a,e,n){return-e/2*(Math.cos(Math.PI*t/n)-1)+a},easeInExpo=function(t,a,e,n){return e*Math.pow(2,10*(t/n-1))+a},easeOutExpo=function(t,a,e,n){return e*(-Math.pow(2,-10*t/n)+1)+a},easeInOutExpo=function(t,a,e,n){return e*(-Math.pow(2,-10*t/n)+1)+a},easeInCirc=function(t,a,e,n){return t/=n,-e*(Math.sqrt(1-t*t)-1)+a},easeOutCirc=function(t,a,e,n){return t/=n,t--,e*Math.sqrt(1-t*t)+a},easeInOutCirc=function(t,a,e,n){return t/=n/2,1>t?-e/2*(Math.sqrt(1-t*t)-1)+a:(t-=2,e/2*(Math.sqrt(1-t*t)+1)+a)},easeInOutElastic=function(t,a,e,n,r,i){if(0==t)return a;if(2==(t/=n/2))return a+e;if(i||(i=.3*n*1.5),!r||r<Math.abs(e)){r=e;var s=i/4}else var s=i/(2*Math.PI)*Math.asin(e/r);return 1>t?-.5*r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-s)*Math.PI/i)+a:r*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*n-s)*Math.PI/i)*.5+e+a},easeInElastic=function(t,a,e,n,r,i){if(0==t)return a;if(1==(t/=n))return a+e;if(i||(i=.3*n),!r||r<Math.abs(e)){r=e;var s=i/4}else var s=i/(2*Math.PI)*Math.asin(e/r);return-(r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-s)*Math.PI/i))+a},easeOutElastic=function(t,a,e,n,r,i){if(0==t)return a;if(1==(t/=n))return a+e;if(i||(i=.3*n),!r||r<Math.abs(e)){r=e;var s=i/4}else var s=i/(2*Math.PI)*Math.asin(e/r);return r*Math.pow(2,-10*t)*Math.sin(2*(t*n-s)*Math.PI/i)+e+a},easeInOutBack=function(t,a,e,n,r){return void 0==r&&(r=1.70158),(t/=n/2)<1?e/2*t*t*(((r*=1.525)+1)*t-r)+a:e/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+a},easeInBack=function(t,a,e,n,r){return void 0==r&&(r=1.70158),e*(t/=n)*t*((r+1)*t-r)+a},easeOutBack=function(t,a,e,n,r){return void 0==r&&(r=1.70158),e*((t=t/n-1)*t*((r+1)*t+r)+1)+a};